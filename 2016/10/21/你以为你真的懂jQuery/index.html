<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0,user-scalable=no"><link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet"><script src="https://use.fontawesome.com/adaf0e149c.js"></script><link rel="stylesheet" href="/css/main.css"><title>林水溶的博客</title></head><body><div id="postContainer"><div id="postTop"><h4 id="logo">Life Is Short</h4><br><br><h2 id="postTitle">你以为你真的懂jQuery?</h2><br><span aria-hidden="true" class="postTime fa fa-calendar">2016-10-21</span><span aria-hidden="true" class="postTags fa fa-tags">jQuery 前端 </span><br><br></div><section id="articleDiv"><p>题目说的这个问题，我是问我自己的。因为我今天发现对于Query，我其实只能算“半懂”，这很可怕，不同于“不懂”和“真懂”，“半懂”的人虽然嘴上会承认自己对概念理解不深，但是心里是不会想这么多的，特别是写代码时。结果总是出现莫名奇妙的Bug,搞得怀疑这，怀疑，最后发现，哦，他喵的是这呀。</p><br><p>以上是自我心理分析。</p><br><hr><br><p>进入正题<br>从一个小例子开始：<br>HTML:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&apos;work&apos;&gt;</div><div class="line">            &lt;p&gt;Work Time&lt;/p&gt;</div><div class="line">            &lt;span id=&apos;what&apos;&gt;A&lt;/span&gt;&lt;span&gt;B&lt;/span&gt;&lt;span&gt;C&lt;/span&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p><br><p>JS:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&apos;#work span:nth-child(1)&apos;).on(&apos;click&apos;,function()&#123;</div><div class="line">        console.log(&apos;WTF&apos;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p><br><p>结果点击第一个span，也就是A,并没有输出WTF。如果选择器直接用ID <code>#what</code>，就正常输出WTF。</p><br><p><em>你知道是哪里的问题吗？</em></p><br><p>在今天之前我是这么理解 <code>#work span:nth-child(1)</code>的：<br>首先匹配 #work（是P 和 SPAN 的父元素），然后找span,发现有三个span,锁定,然后匹配span中的第一个。这是错误的理解。</p><br><p>我在群里问问题的时候，发现有好几个人都是这么理解的，还有几个人理解成： 先匹配#work 然后匹配span,然后找span的第三个child。也是错误的理解。</p><br><p><a href="http://www.jquery123.com/first-child-selector/" target="_blank" rel="external">MDN的first-child页</a>给的例子是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;span&gt;John,&lt;/span&gt;</div><div class="line">    &lt;span&gt;Karl,&lt;/span&gt;</div><div class="line">    &lt;span&gt;Brandon&lt;/span&gt;</div><div class="line"> </div><div class="line">  &lt;/div&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;span&gt;Glen,&lt;/span&gt;</div><div class="line">    &lt;span&gt;Tane,&lt;/span&gt;</div><div class="line">    &lt;span&gt;Ralph&lt;/span&gt;</div><div class="line"> </div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;script&gt;</div><div class="line">$(&quot;div span:first-child&quot;)</div><div class="line">    .css(&quot;text-decoration&quot;, &quot;underline&quot;)</div><div class="line">    .hover(function () &#123;</div><div class="line">          $(this).addClass(&quot;sogreen&quot;);</div><div class="line">        &#125;, function () &#123;</div><div class="line">          $(this).removeClass(&quot;sogreen&quot;);</div><div class="line">        &#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p><br><p>它在例子的上面还说了这么一句话：<br><code>给每个匹配的 div 中查找第一个 span，并加上下划线及增加鼠标悬停效果。</code><br>注意它这么说“第一个span”，我总觉得这句话不妥当，很容易就理解成了上面说的我之前的错误理解，也就是:span是不是父元素的第一个child不重要，重要的是它是不是span里面的第一个。</p><br><p>我觉得前半句应该这么说：给每个匹配的div中查找第一个是span的child。</p><br><p>尽管文档描述里说：<strong>选择所有父级元素下的第一个子元素。</strong>但是看到例子那里的那句话时，我却忘了。</p><br><p><strong>深入理解文档，不要让自己对概念半懂.</strong></p>
</section></div></body></html>